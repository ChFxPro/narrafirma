==== NarraFirma TODO list:

PRIORITY
- catalysis

NAME
Add trademark disclaimer/limitation for NarraFirma, perhaps similar to:
NarraFirma is a trademark of Cynthia F. Kurtz and is used by permission for the main distribution of this software.
Reference: https://www.mozilla.org/en-US/foundation/trademarks/policy/
And: http://wordpressfoundation.org/trademark-policy/

DOMAIN
Refactor code so have better defined domain models, probably with dmodel
Think about changing names for fields when they are in a smaller model
Think about saving and loading for smaller subparts of projects as seperate files

HELP
Figure out exactly how help text will be stored

OVERALL
Migrate away from generating code from textual design to maintaining code directly
Move to system where have model fields as expandable objects, with builder that uses them to make models
Mix in GUI interface points on pages to model fields to produce unified view of application design, with builder to extract pages
Generate stub help files from design specification with one div per interface item on a page
Improve help system so it jumps to those specific help divs associated

SITE
Determine how (or if) to support multi-user sites
Determine how (or if) to support multiple projects per user
Settle on some authentication approach for authoring/administration
Decide on approach for logging in and controlling access to changing project definition

NAVIGATION
Split up long list of choices into navigation sections which only move through pages in a section (only all project pages, only all catalysis, etc.)

RECOMMENDATIONS
Support recommendationTable

TEMPLATES
Fix how templates list popup has too much scrolling and is not sized well; perhaps start with grid item view pane open?
Improve template list generation tool to support storyCollectionActivities and sensemakingActivities

SURVEY GENERAL
Switch to using Dojo Mobile for the surveys
Figure out what URLs will look like for administration/authoring vs. survey taking (multiple?) vs. (maybe) project
Figure out GUI for "finalizing" a survey as opposed to storing current version when enable survey
Have survey page use special server method so does not use Pointrel system directly or need authentication
Record IP address of survey or use another means to see if someone taking it multiple times
Ensure the survey taking app does no need to load entire domain from project editor app or load grid or story browser or other modules it does not really need.
Ideally, all responses for selections (other than numerical sliders) should have unique IDs for each response and the stored response should have the ID as well as the chosen text at the time.
Only store reference to questionnaire file resource, not the resource itself

IDs
Add support for short names (ids) for eliciting questions
Add support for short names (ids) for all options for survey questions
Improve how options are specified for questions in question designer rather than use text box
Make sure that short name IDs entered by user when defining questions are unique among themselves and don't have a leading underscore (or at least aren't "_id")
Ensure short name IDs entered by user do not conflict with automatically created ones or story text and story name

BROWSING
Fix how story browser browses stories for separation of participant info from stories
Should there be a separate participant info browser or is that handled by story browser? If "story browser" does that, may need to rename story browser?
Fix how graph browser shows graphs for separation of participant info from stories
Update story browser when load latest stories from server (without need to press Filter button again)

EXPORT/IMPORT
Add export button for survey results
Maybe import button for survey results
Add way to clear out or reset old survey results? Or maybe partition them by survey?

LOAD/SAVE
Think through how project is loaded and saved, especially what happens if multiple windows or users edit the same project
Improve loading and saving of project so can look at versions
Confirm reloading or closing page if have unsaved data
Autosave, perhaps based on time or based on changing pages
Improve feedback when there are no project versions or survey results; maybe distinguish between an error and nothing being saved yet

LOGGING
Think through logging in the server, perhaps using a library
Ensure useful server logs are kept
Fix issue with PNIWorkbookServer.conf that it uses logs directory that is not server-data/logs
Think through logging in the client, perhaps using a library
Client application could report errors to server or another service
Client application could report usage metrics to server or another service

PRINTING
Implement printStoryForm in domain buttonClicked (what do do about entering multiple stories?)

STORY THEMER
Support storyThemer -- a widget where people look at each story, give it 1-3 themes, then merge the themes into smaller numbers of themes

GRAPH BROWSER
Support graphBrowser "add to observation" button
Support graphBrowser contingency table with statistical results
Support graphBrowser standard deviation and mean for histograms
Support graphBrowser common maximum for multiple histograms
Support graphBrowser displaying related stories for visible data point or bar or line

TRENDS
Support trendsReport -- shows text and graphs in report based on top differences in statistical tests,  has "add to observation" button

CLUSTERING
Support clusterSpace -- used in catalysis to cluster interpretations it is a graphical OR grid way of putting like with like, the option tells you what is to be clustered
Support multiple item selection in clustering diagram
Issue where background is transparent when go to view or change the source in clustering diagram

OBSERVATION LIST
Support observationsList -- used to list all the previously made observations

VENUES
Venues table needs fixing -- one for each participant group
Should "venues" name be changed, as could be confusing as to meaning "location"? But "venue" can also mean "forum" or "soapbox" so maybe OK?

CATALYSIS
Catalysis -- story browser needs two buttons that pull up pages to put things in lists: addToObservation:"page_addToObservation";addToExcerpt:"page_addToExcerpt"
Need to be able to select text in existing story to AddToExcerpts
Need to figure out some way to represent RESULTS in observations (story browser queries/results, graphs, statistical tests)
Observations list should not have "add" button, because observations can only be added using "add to observation" button on story browser, graph browser, trends report (but it should have an edit button)
Support accumulatedItemsGrid -- for results selected to include in an observation
Support annotationsGrid -- for results, excerpts, or interpretations linked to a perspective
Support storiesList -- for choosing a resonant story
Think more about catalysis part
Implement exportPresentationOutline in domain buttonClicked

GRID
When viewing grid data, it should not look editable
Read-only version of checkboxes and radiobutton widgets, used by grid (assuming that is how the read only data is presented)
Popup for add item from grid -- should have better label in title as to what type of thing is added
CSS styling of nested box in grid
Uncomment and test tooltip code in grid table
Get tooltips working in dialogs (maybe Dojo bug?)
Sorting issue: Initial sort order in grid may be order of items in underlying array, but you can't get back to that order once you sort by a column

CONFIGURATION
Add project configuration page?

REPORTS
Improve reports so look nice
Make whole planning phase work (including report)

DASHBOARD
Main Dashboard
Decide or distinguish between between an initial explanation page versus a first big dashboard
Implement countNumberOfVenuesChosen in domain (is this still needed? If not, remove stub code for it.)
General notes should go after dashboard for each section

ALERTS
Help window displaying HTML instead of alert
Look at all alerts in code and make into nicer GUI feedback

TRANSLATION
Better and more consistent approach for translation selections for selects, checkboxes, radiobuttons, and maybe other types
Translate report answers as needed for those types like selections
Final review of all strings in code looking for TODO translate items or similar

DESIGN FILE
Resolve these issues from conversion or add them to list of types not needing a short name:
No short name for type: storyThemer field: themeStories text: Theme stories
No short name for type: trendsReport field: reviewTrends_display text: Trends report
No short name for type: observationsList field: observationsListChoose text: Choose an observation from this list to which to add the selected result, or create a new observation.
No short name for type: excerptsList field: selectExcerpt_excerptsListDisplay text: Collected excerpts
No short name for type: excerptsList field: addToExcerpt_excerptsListChoose text: Choose an excerpt from this list to which to add the selected text, or create a new excerpt.
No short name for type: clusterSpace field: clusterInterpretations_clusterSpace text: Cluster interpretations into perspectives
No short name for type: annotationsGrid field: perspective_linkedResultsList text: Results linked to this perspective
No short name for type: annotationsGrid field: perspective_linkedExcerptsList text: Excerpts linked to this perspective
No short name for type: annotationsGrid field: perspective_linkedInterpretationsList text: Interpretations linked to this perspective

UNSURE
Way to retrieve data about project participant groups [Is this still relevant?]
Implement showHideCollectedStories in domain buttonClicked [Not sure what this means now or if still relevant]
Support imageUploader
Support storyBrowserCount

======= CYNTHIA

Write up sample NarraFirma product offering descriptions for review
Finish templates
Create recommendations file
Create help
Forgot to put "memorable" in eliciting question types

==== Later:

Better mobile support for taking survey on cell phones

Some sort of continue button at bottom of page to progress through steps
Validation of page data as progress through a step

Validation in general when progress through tabs and error reporting
Validation of text fields for empty
Validation of text fields for length
Validation for checkBoxes limited by maximum number of choices as validation error

Resize Tab container when add Graph
Chart with hover for story
Chart where can select a set of stories

Saving project data to a file server as make progress
Think about what happens to data if questions change somehow in future versions of the software

Backup

Roles/Accounts & Security

Page to enter themes for stories
Page to cluster themes into final themes

Disabled or hidden tabs which are enabled as progress

Learn how to use Dojo build process to minimize application

Add support for adding multiple surveys per project
Have survey entry page support different surveys

SURVEY QUESTIONS
Survey - Better validation that at least one story entered instead of forcing first story entry pane to have a story even if second or later panes have stories
Survey - checkbox for is question answer required (maybe later)
Survey - start page required (what do do if nothing entered)
Survey - improve styling on radio buttons for question or alternative approach (maybe later)
Survey - delete button w/confirm
Survey - reorder story numbers
Survey - can't delete last story
Survey - maximum number stories (maybe later)
Survey - back button in browser -- deal with so don't lose data
Remove redundant code when calculating survey questions for story and name in survey and story browser

==== Wish list:

Support for socket.io to track recently added survey results and whether survey is enabled

Add support for surveys that can be in multiple languages
Add support for providing story browser filter options based on analyzing data from surveys to collect all actual choices as well as current questionnaire(s)

Improve dashboards, perhaps with green checkmarks and thinking through completion feedback to be better

Remember previous filtering options for any question in story browser

Adhoc questions (or tags) that can be added to stories when noticing trends (e.g. Did they talk about XYZ in the story?)
Or, saving sets of filtered and/or selected questions
Describe the filtering choices as a string, including detecting ranges for sliders to do dashed range for value

Better font size, maybe user adjustable

User definable CSS themes for surveys

Unit tests

Continuous integration server that runs tests

Multi-user aspects

Improve startup wait progress

Generate PDF reports
Generate CSV output

Improve save/load feedback

==== Might not do

Wordpress plugin

Grid widget option specification to control button availability

Story list using dgrid with accordion for story
Support checkBoxesWithPull -- a set of check boxes where the display texts are drawn from a list entered previously (like for participant list)

Improve take survey page like with support for separate pages

Way to edit a story or participant info (with versioning) if needed? (Can use Pointrel approach with latest document version.)
Editing survey results for consistency with version control based on survey ID?

One project outcome item created per participant group

Check time server on startup in server to see if accurate enough when timestamping versions; maybe same for client

Survey - maybe add unique ID so long survey results can be saved as progressed through and finished later if you have the unique ID....

==== DONE

DONE Checkboxes for multiple choices
DONE Tab container sizing to full page
DONE Slider with labels and no ticks
DONE Way to tag question as story text, story title, question about story, question about participant
DONE Getting dgrid to work alongside CDN
DONE Refactor NarraCoach pages into separate AMD modules
DONE Use table to have up to three sets of answers for general info questions about project participant groups
DONE Tabs should be grouped based on PNI stages
DONE Make "skeleton" of program with named tabs for all steps from spreadsheet
DONE Write convert program that converts from design_page_notes to page specifications
DONE Navigation using dropdown instead of tabs because too many tabs
DONE Buttons to go backward and forward through pages
DONE Story list widget with add button
DONE Grid header resizing
DONE Basic wait message when loading
DONE Remove all JSHint warnings (as of 2014-09-05)
DONE Remaking narracoach_questions.js to be proper module
DONE Support questionsTable
DONE Story browser with list of title and shows stories
DONE Support storyBrowser -- a Smalltalk-like browser for stories (basic support)
DONE Fix issue when two items selected and click view and get NS_ERROR_UNEXPECTED
DONE Moved styling into separate css style sheet
DONE Story browser with two choices of questions and answers
DONE Improve error logging to construct a list of new types added for Dashboard widgets and otherwise
DONE Fix popup dialog background when scroll and shows content beneath it
DONE Remove references to NarraCoach in code and content and replace them with references to PNI Notebook or other appropriate generic references.
DONE Fix issue with the way selects resize inside tables, especially for the story browser question filters
DONE Change name again from PNI Notebook to PNI Workbook
DONE Right-align questions in table of questions for project participants
DONE Resolve issue with story browser filter selects causing table cells to resize
DONE Fix issue for story browser textarea where probably should not be in questions list and *ALL* does not work right
DONE Startup wait progress
DONE Add icons for home, left arrow, and right arrow to buttons in navigation bar.
DONE Writing questions based on book (Cynthia)
DONE Support questionAnswer
DONE Support questionAnswerCountOfTotalOnPage
DONE Support listCount
DONE Support function
DONE Support toggleButton
DONE Dashboard for each section
DONE Create dashboard definitions (Cynthia)
DONE Support checkBoxes
DONE Fix boolean so it can get disabled and value gets set (also fixed radio buttons which uses same widget)
DONE Move question creation code from main.js into question_editor.js and generalize so popups can have special types of components (buttons, grids, storyLists)
DONE Support a button does something when clicked
DONE Test dynamic pages vs. inline page sections for grid items
NOT DOING Create new pages when add new participant groups
DONE Save data (within domain model) as move from page to page
DONE Restore data (from domain model) when load page
DONE Add select at bottom of each page -- this page has been: intentionally skipped;partially completed;completed
DONE Participant questions need to have options and ids and translations
DONE Support grid widget with buttons for add and view
DONE view and add buttons after grid, nested box appears under grid
DONE don't display commented lines from design file
DONE display images
DONE make quizScoreResult work (not entered 0, unknown 0, first 0, then 1, 2, 3). ideally total in each category
DONE make unsupported functionality look better (with explanations of what it will do)
DONE Get grid headers to work reliably everywhere
DONE Refactor code to have one file per page so can override behavior if needed
DONE Write node.js script to generate pages and translations file
DONE Refactor code to have one function per widget type
DONE Refactor code to have one function per calculation for calculated widget types
DONE Fix support for nested grids to store data
DONE Move generated code out of domain
DONE Fix issue with side-by-side story browser filters showing above each other
DONE Put custom widgets in their own folder
DONE Fix dashboard items for page status to be read-only
DONE Bug with scrolling and story browser -- only showing entries in initial page size and rest are blank
CHANGED to inline -- Dynamic pages for participant group aspects
CHANGED to inline -- Dynamic pages for collection session plans
DONE Generate model information into allPagesSummary file.
DONE Improve general button function dispatch handling
DONE make "copy draft answers" in planning phase work
DONE Create stub test server to store and retrieve data under node.js to see what it is like
DONE added application level translation file and using it in translate function, but still need to fill it in
DONE Generic application-level translation TODO items
DONE Move test data out of domain into its own module
DONE Support report (in HTML, name of page, contents of page)
DONE Write nodejs server for Pointrel system (including importable module)
DONE Refactor Pointrel system client code so one includable file
DONE Initial save and load of project data with Pointrel system
DONE Got Pointrel nodejs server integrated with PNIWorkbook system and have server serving pages
DONE Import extra dojo modules (beyond base) into project and use with index.html
DONE Add some basic survey support again to the point of testing core functionality
DONE Add temporary debug button to print out domain project info
DONE Fix issue with checkboxes (and maybe radio buttons) not saving data
DONE Have a way that items in grid that are objects are formatted in some readable way
DONE Add take survey page
DONE Replace fake story data in story browser with a way that real data is loaded and stored
DONE Support for radiobuttons, checkbox, and checkboxes in story browser
DONE Add uuid to survey results
DONE Update story browser when load project
DONE Save data from when survey is taken
DONE Way to refresh survey data into PNIWorkbook on button press (or similar action)
DONE Support graphBrowser -- shows one graph at a time, with two question select drop-downs to choose which graph to show
DONE one bar graph in graph browser (actually scatter plot)
DONE Fix bug from testing with problem adding two grid items
DONE Support grid widget double-click to view
DONE Support all page types: normal (no specification), popup, questionsTable, recommendationTable [deferred to own item], participantStoryForm
DONE Fix survey entry to prevent missing or duplicate question ids (done in domain for now)
DONE Better error messages when loading project or survey results and not available on the server
DONE Investigate double creation of survey data during test on 2014-11-17 on cfk machine for first survey created
DONE Support graphBrowser scatter graph for slide vs. slider
DONE Support graphBrowser contingency table for choice vs. choice
DONE Support graphBrowser multiple histograms for scale vs. slider (or stacked histogram)
DONE Support graphBrowser bar graph for choice alone
DONE Support graphBrowser histogram for slider alone
DONE Provide GUI feedback when saving project to server
DONE Provide GUI feedback when loading project from server
DONE Support grid item remove
DONE Support grid item edit
DONE Support grid item duplicate
DONE Support grid item move up or down 
NOT DOING Tabs created for new pages as add participants or session plans or session records [Replaced by grid table edit area]
DONE Translation of strings related to page of questions on project participant groups [should work like everything else since using grid table]
DONE Add text field to add participants for these:
  DONE Dynamic pages for collection session records [Now handled as grid]
  DONE Dynamic pages for venues [Now handled as grid]
  DONE Dynamic pages for sensemaking session plans [Now handled as grid]
  DONE Dynamic pages for sensemaking session records [Now handled as grid]
  DONE Dynamic pages for intervention plans [Now handled as grid]
  DONE Dynamic pages for intervention records [Now handled as grid]
NOT DOING questionsTable working again [No longer needed]
NOT DOING Fix questionAnswerCountOfTotalOnPages so it can handle a questionsTable [No longer needed]
DONE Improvements to conversion utility to report conversion issues like missing short names better
DONE Use new version of Pointrel system with memory indexing instead of index logs so server code is simpler and more robust and supports use by server-side code
DONE Translation support for survey as distinct from application so two do not potentially collide
DONE Support a participantStoryForm -- the form everyone who comes to the URL can see
DONE webStoryCollectionEnabled toggle status to turn off seems broken
DONE Survey taking system on web server
DONE Implement startup and shutdown of web data collection in domain buttonClicked
DONE Implement copyStoryFormURL in domain buttonClicked
DONE Use questionnaire instead of list of questions as specification for survey form
DONE Determine why survey form is requesting some resources twice (due to loading the domain which checks questionnaire status itself -- fixed)
DONE Fix how survey data is collected and stored to separate multiple stories from participant information
DONE Support for Pointrel server returning the current time so clients can compare with it
DONE Integrity checks in Pointrel server to ensure timestamps from client are not significantly in the future
DONE Have timestamp for new resources set by server as an option, with the sha256AndLength returned for a post
DONE Support a templateList -- a list box with templates read in from a file (of a particular type) with a "copy" button
DONE Figure out how to run NodeJS server on AWS EC2 standard CentOS AMI as a service that gets respawned if it crashes and gets restarted on reboot
DONE Have templates list and recommendations table be popup dialogs opened from a button instead of inline on page
DONE Resolve server configuration issue where upstart got confused about what was running [by removing use of forever]
DONE Improve logging from upstart about when start and stop server
DONE Add proof-of-concept for concept map
DONE Improve concept map so you can have more than one per page or application
DONE Figure out how to save and load concept map more directly than with a button to save
DONE Add support for deleting items in concept map
DONE Support setting color of items in concept map
DONE Change name from to "PNI Workbook" to "NarraFirma" to try it out
DONE Rename "concept map" to "clustering space"
DONE optimize redrawing for changes in clustering diagram
DONE add indicator for selected item in clustering diagram 
DONE Area to right on clustering looks like it should work but does not as circles disappear when maximize window
DONE Support resizing cluster diagram
DONE Store clustering diagram as an object with properties not just an array of items
DONE Fix how templates are not splitting up options separated by semicolons
DONE For all dialogs, look into probable memory leak when closed and they are not destroyed; see conceptMap for an approach that works to clear them
DONE Fix how templates dialog does not close when insert one
DONE Draft answers not copied when press button
DONE Add version format (1.2.3) information to saved resources
DONE Add revision UUID for document version to documents (or sha256AndLength reference?) [Using sha256AndLength for now]
DONE Add reference to previous version (or versions) when save resources to get tree or chain of versions [only for main project answers for now]
DONE Update application code to track versions [only for main project answers]
  <Out of order Cynthia>
NOT DOING Change dashboards to a special widget with list of pages in options [id|dashboard|page1;page2] (Cynthia)
DONE Change all items that start with "list_" (Cynthia)
DONE Remove all "I'm done with this" checkboxes (Cynthia)
DONE Fix all things that say "These are the project stories you have told so far." with explanation of task (Cynthia)
DONE Templates for activities (Cynthia)
DONE Figure out what to do with finalize your questions (Cynthia)
DONE Intro for reports (Cynthia)
DONE Prototype concept images for demo (Cynthia)
DONE Change "Sensemaking sessions" and all other too short labels for lists near end of file (Cynthia)
DONE Every question must have short name - except labels and complicated widgets (Cynthia)
DONE Story collection sessions -- change question to label (Cynthia)
  </Out of order Cynthia>
DONE Fix how selected eliciting question in select box is not entirely visible
DONE Indenting question entry areas under question text using CSS for questionInternal and questionExternal classes
DONE Support adding more than one story in survey form GUI
DONE Look into Dojo resizing bug in Wizard and StackedContainer when at 100% size and it grows height (seems to be fixed if use "doLayout: false"); comment out PDF debugging code in dijit/layout/_LayooutWidget.js
DONE Survey - submit button on participant info
DONE Survey - improve display of title
DONE Survey - Improve how end panel is displayed
DONE Remove unneeded startup calls that may be slowing down page loading: http://dojotoolkit.org/reference-guide/1.10/dijit/layout.html#id8
DONE Improve layout of source dialog in clusterign diagram so the text area scrolls instead of the entire dialog
DONE Survey - validation on picking question, entering story, entering title
DONE Refactored text edit window from clustering diagram into widget support so can be used by other callers
DONE Add export and import buttons for project design
DONE Fixed clipping of left field name in slider
DONE If only ask one prompting question, don't show radio buttons and choice, just present question
DONE Redo test data for latest approach for use with testing catalysis tools
DONE Convert pointrel version to one supporting triples
DONE Changed conversion code so that it has "use strict" used in its functional form
DONE Remove all JSHint warnings
DONE Add toaster support
DONE Migration to dgrid 0.4.0
DONE Change CDN references to Dojo 1.10.3
DONE Add start, previous, next, end navigate buttons to grid table
DONE Issue when trying to move items up or down but have sorted the list based on a header so the order visible is different than the underlying array
DONE Cleanup typos in design and in comments and such
DONE Remove various JSHint-like warnings related to loops and such
DONE Remove cyclic AMD dependencies related to widgetBuilder being used by grid
DONE Refactor toaster into its own module
DONE Add code to put up help window
DONE Add blue information icons for every significant interface point that pull up help window
DONE Change NarraKit everywhere to NarraFirma.
DONE Review nls/messages_legacy_ideas.js and delete it after moving any useful content to design.
DONE Delete old generated and experimental design code no longer used when had been using seperate pages
DONE Move to a more generic translation method where can pass a string or can put a "#" in front to indicate and ID with a text to use after that seperated by a space.
